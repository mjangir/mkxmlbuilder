!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Mkxmlbuilder",[],t):"object"==typeof exports?exports.Mkxmlbuilder=t():e.Mkxmlbuilder=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){(function(n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(s,l){"object"===i(t)&&"undefined"!=typeof e?e.exports=l(o(1),o(2),o(3),o(4),o(5),n||s):s.Mkxmlbuilder=l(utils,attributeModal,previewObj,s.jQuery,s.bootstrap,s.toastr,s.alert,s)}("undefined"!=typeof window?window:void 0,function(e,t,o,n,s,l){function r(e,t){var o;for(o=0;o<t.length;o+=1){if(t[o][e])return t[o];if(t[o].subNodes.length>0)return r(e,t[o].subNodes)}}function a(e,t){var o;for(o=0;o<t.length;o+=1){if(t[o][e])return t.splice(o,1);if(t[o].subNodes.length>0)return a(e,t[o].subNodes)}}function d(e,t){var o,n,i,s,l,r,a,u;for(o in t)n={},i=Object.keys(t[o])[1],s=t[o][i],l=s.mkxmlNodeName?s.mkxmlNodeName:"Empty",r=s.mkxmlNodeValue?s.mkxmlNodeValue:"",a=s.mkxmlAttributes?s.mkxmlAttributes:[],u=t[o].subNodes.length>0,n.id=i,n.name=l,n.value=r,n.attributes=a,n.subNodes=[],e.push(n),u&&d(n.subNodes,t[o].subNodes);return e}function u(e){if("string"!=typeof e&&"object"!==("undefined"==typeof e?"undefined":i(e)))throw new Error("Element must be a valid selector, jQuery object or HTMLDom Node");if("string"==typeof e)e=document.querySelector(e);else{if(!(e instanceof jQuery))throw new Error("Element must be a valid selector, jQuery object or HTMLDom Node");e=e.get(0)}return e}function p(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function c(){var e=this.editor.xmlPreviewButton,t=this.editor.jsonPreviewButton;e.onclick=function(e){return function(){e.showXmlPreview()}}(this),t.onclick=function(e){return function(){e.showJsonPreview()}}(this)}function m(){var e,t,o;e=document.createElement("div"),t=document.createElement("div"),o=document.createElement("div"),e.className="mkxmlbuilder-outer",t.className="mkxmlbuilder-editor",o.className="mkxmlbuilder-preview",t.appendChild(this.editor.panelWrapper),o.appendChild(this.preview.panelWrapper),e.appendChild(t),this.options.showPreviewPanel?e.appendChild(o):t.style.width="100%",this.outerWrapper=e,this.editorWrapper=t,this.editorBody=this.editor.panelBody,this.previewWrapper=o,this.previewBody=this.preview.panelBody,this.element.appendChild(e)}function h(e,t,o){var n,i,s,l,a,d,u,c,m,h,C,N,S,B,k;for(t=t||1,n=1;n<=t;n+=1)i=document.createElement("div"),s=document.createElement("div"),l=document.createElement("input"),a=document.createElement("input"),d=document.createElement("span"),u=document.createElement("i"),c=document.createElement("span"),m=document.createElement("i"),h=document.createElement("span"),C=document.createElement("i"),N=document.createElement("span"),S=document.createElement("i"),i.className="mkxmlbuilder-node-item",s.className="mkxmlbuilder-inputbox",l.className="node-item-name "+(this.options.bootstrapStyle?"form-control":""),a.className="node-item-value "+(this.options.bootstrapStyle?"form-control":""),d.className="node-icon",c.className="node-icon",h.className="node-icon",N.className="node-icon",u.className=this.options.collapseIconClass,m.className=this.options.attrIconClass,C.className=this.options.addIconClass,S.className=this.options.removeIconClass,d.appendChild(u),c.appendChild(m),h.appendChild(C),N.appendChild(S),s.appendChild(l),s.appendChild(a),this.options.showCollapseButton&&s.appendChild(d),this.options.showAttrButton&&s.appendChild(c),this.options.showAddButton&&s.appendChild(h),this.options.showRemoveNodeButton&&e!==this.editorBody&&s.appendChild(N),l.setAttribute("placeholder",this.options.nodeNamePlaceholder),a.setAttribute("placeholder",this.options.nodeValuePlaceholder),i.mkxmlAttributes={},i.appendChild(s),e.appendChild(i),l.onkeyup=function(e,t){return function(o){w.call(e,o,t)}}(this,i),l.onchange=function(e,t){return function(o){w.call(e,o,t)}}(this,i),a.onkeyup=function(e,t){return function(o){x.call(e,o,t)}}(this,i),a.onchange=function(e,t){return function(o){x.call(e,o,t)}}(this,i),d.onclick=function(e,t){return function(o){y.call(e,o,t)}}(this,i),c.onclick=function(e,t){return function(o){f.call(e,o,t)}}(this,i),h.onclick=function(e,t,o,n){return function(i){b.call(e,i,t,o,n)}}(this,i,l,a),this.options.showRemoveNodeButton&&e!==this.editorBody&&(N.onclick=function(e,t,o){return function(n){v.call(e,n,t,o)}}(this,e,i)),i.mkxmlUniqueId=p(),k={subNodes:[]},k[i.mkxmlUniqueId]=i,B=r(e.mkxmlUniqueId,this.nodeHierarchy),B&&B.subNodes?B.subNodes.push(k):this.nodeHierarchy.push(k)}function f(e,t){this.attributeModal.setNode(t),this.attributeModal.show()}function y(e,t){}function b(e,t,o,n){var i=prompt("Please enter number of nodes you want")||0,s=window.getComputedStyle(o,null),l=parseInt(s.getPropertyValue("width"),10);i>0&&(o.style.width=2*l+2*l*1/100+"px",n.style.display="none",h.call(this,t,i))}function v(e,t,o){o.remove(),a(o.mkxmlUniqueId,this.nodeHierarchy);var n,i,s=t.querySelector(".node-item-name"),l=t.querySelector(".node-item-value"),r=t.querySelectorAll(".mkxmlbuilder-node-item");r.length<1&&(n=window.getComputedStyle(s,null),i=parseInt(n.getPropertyValue("width"),10),s.style.width=i/2-i/2*1/100+"px",l.style.display="inline-block")}function w(e,t){t.mkxmlNodeName=e.target.value}function x(e,t){t.mkxmlNodeValue=e.target.value}function C(s,l,r){if(arguments.length<=0)throw new TypeError("You must have to provide element in the constructor");this.options={showAddButton:!0,showCollapseButton:!0,showAttrButton:!0,showRemoveNodeButton:!0,showRemoveConfirmation:!0,showPreviewPanel:!0,collapseIconClass:"fa fa-plus text-info",attrIconClass:"fa fa-tag text-primary",addIconClass:"fa fa-plus-circle text-success",removeIconClass:"fa fa-trash text-danger",nodeNamePlaceholder:"Node Name...",nodeValuePlaceholder:"Node Value...",bootstrapStyle:!0,editor:{showHeader:!0,showFooter:!0,showXmlPreviewButton:!0,showJsonPreviewButton:!0,headerTitle:"Editor",xmlPreviewButtonText:"Show XML Preview",jsonPreviewButtonText:"Show JSON Preview",bsStyle:!0,bsPanelColor:"primary",bsXmlPreviewButtonColor:"primary",bsJsonPreviewButtonColor:"primary"},preview:{showHeader:!0,showFooter:!0,showCopyButton:!0,headerTitle:"Preview",copyButtonText:"Copy To Clipboard",bsStyle:!0,bsPanelColor:"primary",bsCopyButtonColor:"primary"},attributeModal:{headerTitle:"Set Node Attributes",headerCloseIcon:"&times;",closeButtonText:"Close",saveButtonText:"Save",addRowIconHtml:'<i class="fa fa-plus-circle text-primary"></i>',removeRowIconHtml:'<i class="fa fa-minus-circle text-danger"></i>',bsStyle:!0,bsSaveButtonColor:"primary",bsCloseButtonColor:"danger"}},this.nodeHierarchy=[],this.element=u(s),this.options="object"===("undefined"==typeof l?"undefined":i(l))?e.extend(this.options,l):this.options,this.data=r||null,this.editor=new t(this.options.editor),this.preview=new o(this.options.preview),this.attributeModal=new n(this.options.attributeModal),c.call(this),m.call(this),this.init()}return C.prototype.init=function(){null!==this.data?renderWithData.call(this,this.editorBody,this.data):h.call(this,this.editorBody)},C.prototype.generateJsonOutput=function(){return d([],this.nodeHierarchy)},C.prototype.generateXmlOutput=function(){},C.prototype.showXmlPreview=function(){this.preview.panelBodyPre.innerHTML=JSON.stringify(this.generateJsonOutput(),null,2)},C.prototype.showJsonPreview=function(){this.preview.panelBodyPre.innerHTML=JSON.stringify(this.generateJsonOutput(),null,2)},C.prototype.getAllXmlNodes=function(){return this.nodeHierarchy},C})}).call(t,function(){return this}())},function(e,t){"use strict";var o={addClass:function(e,t){if("undefined"!=typeof t&&null!==t&&""!==t&&t){var o=t.indexOf(" ")>-1?t.split(" "):t;if(Array.isArray(o))for(var n=0;n<o.length;n++)e.classList.add(o[n]);else e.classList.add(o);return e}},escapeHtml:function(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},stringToHtmlElement:function(e){var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t),t.contentDocument.open(),t.contentDocument.write(e),t.contentDocument.close();var o=t.contentDocument.body.firstChild;return document.body.removeChild(t),o},extend:function(e,t){var o,n={};for(o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);for(o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n},isElementVisible:function(e){var t=window.getComputedStyle(e);return"none"===t.display||"hidden"==t.visibility},design:{easing:{linear:function(e){return e},quadratic:function(e){return Math.pow(e,2)},swing:function(e){return.5-Math.cos(e*Math.PI)/2},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e,t){return Math.pow(e,2)*((t+1)*e-t)},bounce:function(e){for(var t=0,o=1;1;t+=o,o/=2)if(e>=(7-4*t)/11)return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(o,2)},elastic:function(e,t){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}},animate:function(e){var t=new Date,o=setInterval(function(){var n=new Date-t,i=n/e.duration;i>1&&(i=1),e.progress=i;var s=e.delta(i);e.step(s),1==i&&(clearInterval(o),"function"==typeof e.complete&&e.complete())},e.delay||10);return o},fadeOut:function(e,t){var n=1,i=t.easing||"swing";return this.animate({duration:t.duration,delta:function(e){return e=this.progress,o.design.easing[i](e)},complete:t.complete,step:function(t){e.style.opacity=n-t}})},fadeIn:function(e,t){var n=0,i=t.easing||"swing";return this.animate({duration:t.duration,delta:function(e){return e=this.progress,o.design.easing[i](e)},complete:t.complete,step:function(t){e.style.opacity=n+t}})}}};e.exports=o},function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(1);!function(){function t(e,t){if(!e instanceof t)throw new TypeError("Cannot call a class as a function")}function o(){var e,t,o,n,i,s,l;return e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("span"),s=document.createElement("button"),l=document.createElement("button"),e.className=(this.options.bsStyle?"panel panel-"+this.options.bsPanelColor:"")+" mkxmlbuilder-editor-panel",t.className=(this.options.bsStyle?"panel-heading":"")+" mkxmlbuilder-editor-panel-header",n.className=(this.options.bsStyle?"panel-body":"")+" mkxmlbuilder-editor-panel-body",i.className=(this.options.bsStyle?"panel-footer":"")+" mkxmlbuilder-editor-panel-footer",s.className=(this.options.bsStyle?"btn btn-"+this.options.bsXmlPreviewButtonColor:"")+" mkxmlbuilder-editor-xml-preview-btn",l.className=(this.options.bsStyle?"btn btn-"+this.options.bsJsonPreviewButtonColor:"")+" mkxmlbuilder-editor-json-preview-btn",t.appendChild(o),this.panelWrapper=e,this.panelHeader=t,this.panelBody=n,this.panelFooter=i,this.headerTitle=o,this.xmlPreviewButton=s,this.jsonPreviewButton=l,this.options.showHeader&&this.panelWrapper.appendChild(this.panelHeader),this.panelWrapper.appendChild(this.panelBody),this.options.showFooter&&this.panelWrapper.appendChild(this.panelFooter),this.options.showXmlPreviewButton&&this.panelFooter.appendChild(this.xmlPreviewButton),this.options.showJsonPreviewButton&&(this.jsonPreviewButton.style.marginLeft="10px",this.panelFooter.appendChild(this.jsonPreviewButton)),o.innerHTML=this.options.headerTitle,s.innerHTML=this.options.xmlPreviewButtonText,l.innerHTML=this.options.jsonPreviewButtonText,this}function s(e){return t(this,s),this.options="object"===("undefined"==typeof e?"undefined":n(e))?i.extend(this.options,e):this.options,o.call(this)}e.exports=s}()},function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(1);!function(){function t(e,t){if(!e instanceof t)throw new TypeError("Cannot call a class as a function")}function o(){var e,t,o,n,i,s,l;return e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("pre"),s=document.createElement("div"),o=document.createElement("span"),l=document.createElement("button"),e.className=(this.options.bsStyle?"panel panel-"+this.options.bsPanelColor:"")+" mkxmlbuilder-preview-panel",t.className=(this.options.bsStyle?"panel-heading":"")+" mkxmlbuilder-preview-panel-header",n.className=(this.options.bsStyle?"panel-body":"")+" mkxmlbuilder-preview-panel-body",s.className=(this.options.bsStyle?"panel-footer":"")+" mkxmlbuilder-preview-panel-footer",l.className=(this.options.bsStyle?"btn btn-"+this.options.bsCopyButtonColor:"")+" mkxmlbuilder-editor-preview-btn",t.appendChild(o),this.panelWrapper=e,this.panelHeader=t,this.panelBody=n,this.panelBodyPre=i,this.panelFooter=s,this.headerTitle=o,this.copyButton=l,this.options.showHeader&&this.panelWrapper.appendChild(this.panelHeader),this.panelBody.appendChild(i),this.panelWrapper.appendChild(this.panelBody),this.options.showFooter&&this.panelWrapper.appendChild(this.panelFooter),this.options.showCopyButton&&this.panelFooter.appendChild(this.copyButton),o.innerHTML=this.options.headerTitle,l.innerHTML=this.options.copyButtonText,this}function s(e){return t(this,s),this.options="object"===("undefined"==typeof e?"undefined":n(e))?i.extend(this.options,e):this.options,o.call(this)}e.exports=s}()},function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(1);!function(){function t(e){this.nodeItem=null,this.options="object"===("undefined"==typeof e?"undefined":n(e))?i.extend(this.options,e):this.options,o.call(this)}function o(){var e,t,o,n,i,l,r,a,d,u,p;return e=document.createElement("div"),t=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),i=document.createElement("h4"),l=document.createElement("button"),r=document.createElement("span"),a=document.createElement("div"),d=document.createElement("div"),u=document.createElement("button"),p=document.createElement("button"),e.className=this.options.bsStyle===!0?"modal":"mkxmlbuilder-modal",t.className=this.options.bsStyle===!0?"modal-dialog":"mkxmlbuilder-modal-dialog",o.className=this.options.bsStyle===!0?"modal-content":"mkxmlbuilder-modal-content",n.className=this.options.bsStyle===!0?"modal-header":"mkxmlbuilder-modal-header",i.className=this.options.bsStyle===!0?"modal-title":"mkxmlbuilder-modal-title",l.className=this.options.bsStyle===!0?"close":"mkxmlbuilder-modal-close-icon",a.className=this.options.bsStyle===!0?"modal-body":"mkxmlbuilder-modal-body",d.className=this.options.bsStyle===!0?"modal-footer":"mkxmlbuilder-modal-footer",u.className=this.options.bsStyle===!0?"btn btn-"+this.options.bsSaveButtonColor:"mkxmlbuilder-modal-save-btn",p.className=this.options.bsStyle===!0?"btn btn-"+this.options.bsCloseButtonColor:"mkxmlbuilder-modal-close-btn",i.innerHTML=this.options.headerTitle,r.innerHTML=this.options.headerCloseIcon,u.innerHTML=this.options.saveButtonText,p.innerHTML=this.options.closeButtonText,l.appendChild(r),n.appendChild(l),n.appendChild(i),d.appendChild(p),d.appendChild(u),e.appendChild(t),t.appendChild(o),o.appendChild(n),o.appendChild(a),o.appendChild(d),e.style.display="none",this.modalWrapper=e,this.modalBody=a,this.saveBtn=u,this.closeBtn=p,this.closeIcon=r,document.querySelector("body").appendChild(e),s.call(this),this}function s(){var e=this;this.closeIcon.onclick=function(){e.hide()},this.closeBtn.onclick=function(){e.hide()},this.saveBtn.onclick=function(){e.save()}}function l(e){return function(){e.setModalAttributes()}}function r(e){return function(){e.remove()}}t.prototype.setNode=function(e){this.nodeItem=e},t.prototype.setModalAttributes=function(e){var t,o,n,i,s,a,d,u=this;if("undefined"!=typeof e)for(;this.modalBody.firstChild;)this.modalBody.removeChild(this.modalBody.firstChild);for(e=e||[{name:"",value:""}],d=0;d<e.length;d+=1)a=e[d],t=document.createElement("div"),o=document.createElement("input"),n=document.createElement("input"),i=document.createElement("span"),s=document.createElement("span"),t.className="attr-row",o.className="attr-name "+(u.options.bsStyle?"form-control":""),n.className="attr-value "+(u.options.bsStyle?"form-control":""),i.className="attr-add-button",s.className="attr-remove-button",i.innerHTML=this.options.addRowIconHtml,s.innerHTML=this.options.removeRowIconHtml,o.value=a.name,n.value=a.value,t.appendChild(o),t.appendChild(n),this.modalBody.appendChild(t),this.modalBody.querySelectorAll(".attr-row").length>1?t.appendChild(s):t.appendChild(i),i.onclick=l(u),s.onclick=r(t)},t.prototype.show=function(){var e="undefined"!==this.nodeItem&&"object"===n(this.nodeItem.mkxmlAttributes)&&Object.keys(this.nodeItem.mkxmlAttributes).length>0?this.nodeItem.mkxmlAttributes:[{name:"",value:""}];this.setModalAttributes(e),this.modalWrapper.classList.add("in"),this.modalWrapper.style.display="block",document.body.classList.add(this.options.bsStyle?"modal-open":"mkxmlbuilder-modal")},t.prototype.hide=function(){this.modalWrapper.classList.remove("in"),this.modalWrapper.style.display="none",document.body.style="",document.body.classList.remove(this.options.bsStyle?"modal-open":"mkxmlbuilder-modal")},t.prototype.save=function(){var e,t,o,n,i=(this.nodeItem,[]);if("undefined"!=typeof this.nodeItem&&null!==this.nodeItem&&(e=this.modalBody.querySelectorAll(".attr-row"),e&&e.length>0)){for(n=0;n<e.length;n+=1)t=null!==e[n].querySelector(".attr-name")?e[n].querySelector(".attr-name").value:null,o=null!==e[n].querySelector(".attr-value")?e[n].querySelector(".attr-value").value:null,null!==t&&null!==o&&i.push({name:t,value:o});this.nodeItem.mkxmlAttributes=i}this.hide()},e.exports=t}()},function(e,t){}])});
//# sourceMappingURL=mkxmlbuilder.min.js.map